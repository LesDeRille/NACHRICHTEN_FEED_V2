<!DOCTYPE html>
<html>

<head>
    <title>Tagesschau</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <!-- weitere Kopfinformationen -->
    <!-- Kommentare werden im Browser nicht angezeigt. -->
</head>

<style>
  a {
    color: #0060B6;
    text-decoration: none;
}
</style>

<body>
    <h2>Tagesschau</h2>
    <input id="ausland" type="button" value="ausland" />
    <input id="inland" type="button" value="inland" />
    <input id="wirtschaft" type="button" value="wirtschaft" />
    <input id="sport" type="button" value="sport" />
    <input id="investigativ" type="button" value="investigativ" />
    <input id="wissen" type="button" value="wissen" />

    <dl id="Schlagzeilen">
        <!-- <dt>Beast of Bodmin</dt>
        <dd>A large feline inhabiting Bodmin Moor.</dd> -->
    </dl>
    <script>

        async function urlLesen(ressort) {
            let url = 'https://www.tagesschau.de/api2u/news/?ressort=' + ressort;
            let response = await fetch(url);
            let commits = await response.json(); // read response body and parse as JSON
            meldungenVerarbeiten(commits.news)
        }


        function meldungenVerarbeiten(inhalt) {
            inhalt.sort((a, b) => new Date(b.date) - new Date(a.date))
            for (meldung of inhalt) {
                neueSchlagzeileErzeugen(meldung);
            }
        }

        function neueSchlagzeileErzeugen(meldung) {
            let schlagzeilen = document.getElementById("Schlagzeilen");
            let neuerTitel = document.createElement("dt");
            let neueErsteZeile = document.createElement("dd");
            let neuerAnker = document.createElement("a");
            let leerzeile = document.createElement("p")
            //console.log("neue", meldung.title)
            neueErsteZeile.textContent = meldung.firstSentence;
            neuerAnker.href = meldung.detailsweb;
            neuerAnker.textContent = meldung.title + ", vom " + (new Date(meldung.date)).toLocaleString();

            neuerTitel.appendChild(neuerAnker);

            schlagzeilen.appendChild(neuerTitel)
            schlagzeilen.appendChild(neueErsteZeile);
            schlagzeilen.appendChild(leerzeile);
        }

        function buttonFunktion() {
            let inland = document.getElementById("inland");
            let ausland = document.getElementById("ausland");
            let wirtschaft = document.getElementById("wirtschaft");
            let sport = document.getElementById("sport");
            let investigativ = document.getElementById("investigativ");
            let wissen = document.getElementById("wissen");

            function bisherigeSchlagzeilenLoeschen() {
                const schlag = document.getElementById("Schlagzeilen");
                while (schlag.firstChild) {
                    schlag.removeChild(schlag.firstChild);
                }
            }
            inland.addEventListener("click", () => {
                bisherigeSchlagzeilenLoeschen();
                urlLesen("inland")
            });
            ausland.addEventListener("click", () => {
                bisherigeSchlagzeilenLoeschen();
                urlLesen("ausland")
            });
            wirtschaft.addEventListener("click", () => {
                bisherigeSchlagzeilenLoeschen();
                urlLesen("wirtschaft")
            });
            sport.addEventListener("click", () => {
                bisherigeSchlagzeilenLoeschen();
                urlLesen("sport")
            });
            investigativ.addEventListener("click", () => {
                bisherigeSchlagzeilenLoeschen();
                urlLesen("investigativ")
            });
            wissen.addEventListener("click", () => {
                bisherigeSchlagzeilenLoeschen();
                urlLesen("wissen")
            });
        }
        urlLesen("sport")
        buttonFunktion()

    </script>
</body>

</html>